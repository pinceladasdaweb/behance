/*! Behance-Portfolio-Page v2.0.0 | (c) 2016 Pedro Rogerio |  */
!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Behance=t()}(this,function(){"use strict";Function.prototype.hasOwnProperty("bind")||(Function.prototype.bind=function(){var e=this,t=arguments[0],i=Array.prototype.slice.call(arguments,1);return function(){return e.apply(t,i.concat(Array.prototype.slice.call(arguments)))}});var e=function(t){if(!(this&&this instanceof e))return new e(t);if(t||(t={}),!t.user)throw"Provide a valid Behance user name";this.endpoint="./request.php?user="+t.user,this.body=document.querySelector("body"),this.loader=document.querySelector(".loading"),this.request()};return e.prototype={getJSON:function(e,t,i){var a=new XMLHttpRequest;a.open("GET",e,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-type","application/json"),a.onreadystatechange=function(){if(4===this.readyState)if(this.status>=200&&this.status<300||304===this.status){var e=JSON.parse(this.responseText);t.call(this,e)}else i.call(this,this.status+" - "+this.statusText)},a.send(),a=null},supportsSvg:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},createEls:function(e,t,i){var a,s=document.createElement(e);for(a in t)t.hasOwnProperty(a)&&(s[a]=t[a]);return i&&s.appendChild(document.createTextNode(i)),s},each:function(e,t){for(var i=0,a=e.length;a>i;)t(e[i],i),i+=1},structureHeader:function(){var e,t=document.createDocumentFragment();return e=this.createEls("header",{className:"portfolio-header clearfix",id:"header"}),t.appendChild(e),this.body.appendChild(t),this},structureContent:function(){var e,t,i,a=document.createDocumentFragment();return e=this.createEls("div",{className:"content-area clearfix",id:"content"}),t=this.createEls("div",{className:"portfolio-area clearfix",id:"portfolio"}),i=this.createEls("ul",{className:"portfolio-list clearfix"}),t.appendChild(i),e.appendChild(t),a.appendChild(e),this.body.appendChild(a),this},structureFooter:function(){var e,t,i,a,s,r=document.createDocumentFragment();return e=this.createEls("footer",{className:"portfolio-footer clearfix",id:"footer"}),t=this.createEls("div",{className:"power-by",id:"power"}),i=this.createEls("p",{},"Powered by"),s=this.createEls("a",{className:"power-logo fi-social-behance",href:"http://www.behance.net/",title:"Behance"},"Behance"),a=this.createEls("p"),a.appendChild(s),t.appendChild(i),t.appendChild(a),e.appendChild(t),r.appendChild(e),this.body.appendChild(r),this},mountProfile:function(e){var t,i,a,s,r,n,o,l=document.querySelector("#header"),c=e.user.fields,d=document.createDocumentFragment();return t=this.createEls("figure",{className:"profile-avatar"}),i=this.createEls("img",{src:e.user.images[138]}),a=this.createEls("h1",{className:"profile-name"},e.user.display_name),s=this.createEls("ul",{className:"field-list"}),o=this.createEls("div",{className:"profile-fields"}),n=this.createEls("div",{className:"profile-location fi-marker"},e.user.location),this.each(c,function(e){r=this.createEls("li",{className:"field-item"},e),s.appendChild(r.cloneNode(!0))}.bind(this)),t.appendChild(i),o.appendChild(s),d.appendChild(t),d.appendChild(a),d.appendChild(o),d.appendChild(n),l.appendChild(d),this},mountProjects:function(e){var t,i,a,s,r,n,o,l,c,d,h,p,u,f=document.createDocumentFragment();return this.each(e.projects,function(e){for(t=e.fields,i=document.querySelector(".portfolio-list"),s=this.createEls("ul",{className:"field-list"}),r=this.createEls("li",{className:"portfolio-item"}),l=this.createEls("div",{className:"portfolio-content"}),c=this.createEls("div",{className:"portfolio-fields"}),d=this.createEls("figure",{className:"portfolio-cover",title:e.name}),o=this.createEls("a",{href:e.url}),h=this.createEls("img",{className:"portfolio-image",src:e.covers[404]}),a=this.createEls("h2",{className:"portfolio-title"},e.name),p=0,u=t.length;u>p;p+=1)n=this.createEls("li",{className:"field-item"},t[p]),s.appendChild(n.cloneNode(!0));o.appendChild(h),d.appendChild(o),l.appendChild(d),l.appendChild(a),c.appendChild(s),l.appendChild(c),r.appendChild(l),f.appendChild(r),i.appendChild(f)}.bind(this)),this},attach:function(e){var t=e&&e.http_code;200===t?(this.body.removeChild(this.loader),this.structureHeader().structureContent().structureFooter(),this.mountProfile(e).mountProjects(e)):this.fail()},fail:function(){var e=document.createDocumentFragment(),t=this.createEls("p",{className:"error"},"An error ocurred, try again later.");e.appendChild(t),this.body.removeChild(this.loader),this.body.appendChild(e)},request:function(){this.supportsSvg()||(this.loader.src="./public/css/img/loading.gif"),this.getJSON(this.endpoint,this.attach.bind(this),this.fail.bind(this))}},e});